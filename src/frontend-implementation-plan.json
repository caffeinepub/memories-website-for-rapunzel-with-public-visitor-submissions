{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Username + 4-digit code lock screen gate (tingi99/meow99 + 5699)",
  "requirements": [
    {
      "id": "REQ-54",
      "summary": "Add a username input above the existing 4-digit access code input on the PasswordGate with clear English labels and helper text.",
      "acceptanceCriteria": [
        "The lock screen displays a new \"Username\" input field above the existing \"Access Code\" (PIN) field.",
        "All user-facing text in the lock screen remains in English and matches the site’s warm visual theme (Tailwind + shadcn).",
        "The username field accepts free-typed text (not numeric-only), while the access code field remains numeric-only and limited to 4 digits."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/PasswordGate.tsx",
          "operation": "modify",
          "description": "Update the PasswordGate UI to include a new text-based \"Username\" field positioned above the existing numeric-only 4-digit \"Access Code\" field, with English helper text. Use shadcn-ui building blocks already in use (Card, Input, Label, Button, Alert) to preserve the warm Tailwind + shadcn look and feel. Verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-55",
      "summary": "Require exact allowed username (tingi99 or meow99) AND exact 4-digit code (5699) to unlock; show clear English error messaging without revealing additional secrets.",
      "acceptanceCriteria": [
        "Entering username \"tingi99\" with access code \"5699\" unlocks the site.",
        "Entering username \"meow99\" with access code \"5699\" unlocks the site.",
        "Any other username value does not unlock the site, even if the code is correct.",
        "Any incorrect code does not unlock the site, even if the username is one of the allowed values.",
        "Error messaging is shown in English and clearly distinguishes invalid credentials (e.g., \"Incorrect username or code. Please try again.\") without revealing any new secrets beyond the allowed usernames already specified by the user."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/usePasswordGate.ts",
          "operation": "modify",
          "description": "Update the password gate unlock logic to validate BOTH fields: username must be exactly one of the two allowed values (\"tingi99\" or \"meow99\") and code must be exactly \"5699\". Adjust the unlock function signature to accept username+code together while keeping the mechanism fully frontend/session-based."
        },
        {
          "path": "frontend/src/components/PasswordGate.tsx",
          "operation": "modify",
          "description": "Update form submission to call the new unlock API with both username and access code, and display a single English error message for invalid credentials (e.g., \"Incorrect username or code. Please try again.\") without adding any UI to configure usernames/codes. Keep inputs constrained: username free-typed text; code numeric-only limited to 4 digits. Use existing shadcn-ui Alert for errors. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Wire the updated PasswordGate unlock callback signature from usePasswordGate into the PasswordGate component so the app unlock flow still works with the new username+code validation."
        }
      ]
    },
    {
      "id": "REQ-56",
      "summary": "Persist unlocked state for the browser session only after successful username+code validation, and ensure the existing Lock action fully re-locks and shows the gate again.",
      "acceptanceCriteria": [
        "After a successful unlock with a valid username + \"5699\", refreshing the page during the same browser session does not re-prompt for credentials (same behavior as before, now gated by both fields).",
        "Clicking the existing \"Lock\" button returns the visitor to the username+code gate and clears the session’s unlocked state so a refresh shows the gate again.",
        "No backend changes are required for this persistence behavior (session-only browser storage remains the mechanism)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/usePasswordGate.ts",
          "operation": "modify",
          "description": "Ensure sessionStorage unlocked persistence is written only after BOTH username and code are validated successfully, and that the existing lock() implementation fully clears the session flag so refresh re-prompts."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Confirm the existing \"Lock\" actions continue to call the password-gate lock() function so the app returns to the username+code gate immediately and remains locked across refresh within the same session."
        }
      ]
    }
  ]
}