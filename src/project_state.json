{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Rollback production deployment to Version 21 (frontend and backend), discarding changes from Versions 22–24; address reported memory writing and chat writing issues.",
  "architectural_notes": [
    "Production deployment needs capability to rollback to a prior live version (e.g., v21) across both frontend and backend."
  ],
  "known_issues": [
    "Memory writing is broken (details TBD).",
    "Chat writing is broken (details TBD)."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-rollback-the-application-frontend-backend-to-the-exact-behavior-and-feature-set-of-live-version-21-fully-discarding-all-changes-introduced-in-versions-22-24-including-the-dynamic-lock-screen-phrase-rotation-and-changing-background-system",
      "title": "Rollback the application (frontend + backend) to the exact behavior and feature set of Live Version 21, fully discarding all changes introduced in Versions 22–24 (including the dynamic lock screen phrase rotation and changing background system).",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-frontend-chat-delete-mutations-to-send-message-ids-in-the-exact-candid-type-expected-by-the-backend-deletechatmessages-method-and-ensure-the-ui-reflects-successful-deletion-without-requiring-a-full-page-refresh",
      "title": "Fix the frontend chat delete mutations to send message IDs in the exact Candid type expected by the backend deleteChatMessages method, and ensure the UI reflects successful deletion without requiring a full page refresh.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Fix memory writing issues (data not saving/corrupt/etc.)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Fix chat writing issues (messages not storing/displaying/order/etc.)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Rollback production to Live Version 21 for both frontend and backend; discard Versions 22–24",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-5",
      "summary": "Fix the backend so that creating and editing memories reliably persists across canister upgrades/redeploys, and the memory list reflects newly submitted/edited memories immediately after successful writes.",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Fix the backend so that submitting chat messages reliably persists across canister upgrades/redeploys, messages are returned in a consistent order, and deletions work reliably with the IDs sent by the frontend.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Rollback to Version 21 and fix memory/chat write persistence issues",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}