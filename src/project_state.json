{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 47,
  "summary": "Add enhancements to the post-unlock chat experience: keep the floating chat widget (with fixed-height scrollable list + warm scrollbar and per-user message deletion), and also add a full chat UI that opens in a new browser tab from the widget, existing alongside the in-page floating chat. Additionally, chat messages should auto-delete after 48 hours for all users.",
  "architectural_notes": [
    "Password protection requested is front-end only (not secure access control); it hides content in the UI until the correct 4-digit code is entered.",
    "Image selection should use standard browser file picker (<input type=\"file\">); browsers do not support deeper device-level storage permissions.",
    "Video uploads should use standard browser file picker (<input type=\"file\" accept=\"video/*\">) and store the selected video as a data URL; videos should not autoplay and should only play when the memory card is opened.",
    "Piddu bot replaces Tingi: bottom-right widget with a new UI look; simulated/deterministic responses only (no real LLM integration) and no Google Custom Search / no backend search or summarizing.",
    "Piddu/chat UI is removed and replaced by a bottom-right floating music-box widget that supports visitor music uploads.",
    "Visitor-uploaded music should be persisted in the backend (shared across visitors) and rendered in the widget as a simple list with play/pause controls.",
    "Password gate now requires a username + 4-digit code; username validation is front-end only and accepts either \"tingi99\" or \"meow99\" (username input displayed above the PIN input).",
    "Memory editing requires tracking/identifying the original submitter (no real auth); implement a submitter identifier and enforce edit permission so only the original submitter can edit.",
    "Support an edited timestamp on memories (e.g., editedAt) and display it in the UI when present.",
    "Add memory access control rules driven by the entered username (front-end only): tingi99 shows all memories; meow99 filters to only memories whose submitter identifier matches the current browser and only allows editing those."
  ],
  "known_issues": [
    "Memory editing UI is visible but the edit/save flow is not working; needs a fix so memory text can be added/removed and saved successfully.",
    "Chat widget per-message delete icon is missing in the current build; needs to be added (and visible in both single-delete and multi-select modes)."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-create-a-public-website-focused-on-written-memories-of-a-friend-named-rapunzel-with-a-landing-view-that-introduces-the-site-and-shows-a-readable-list-of-submitted-memories",
      "title": "Create a public website focused on written memories of a friend named “Rapunzel”, with a landing view that introduces the site and shows a readable list of submitted memories.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-public-submission-flow-for-visitors-to-write-and-submit-new-memories-from-the-ui-without-requiring-login-include-form-validation-required-memory-text-reasonable-max-length-and-clear-success-error-messaging-in-english",
      "title": "Add a public submission flow for visitors to write and submit new memories from the UI, without requiring login. Include form validation (required memory text, reasonable max length) and clear success/error messaging in English.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-add-basic-content-presentation-features-for-the-memories-list-show-newest-first-ordering-and-display-the-created-date-time-in-a-human-friendly-format-ensure-long-memories-wrap-and-remain-readable",
      "title": "Add basic content presentation features for the memories list: show newest-first ordering and display the created date/time in a human-friendly format; ensure long memories wrap and remain readable.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-coherent-creative-visual-theme-suitable-for-a-warm-memory-book-site-distinct-color-palette-typography-spacing-and-card-list-styling-and-use-it-consistently-across-the-landing-list-and-submission-form-do-not-use-a-blue-purple-dominant-palette",
      "title": "Apply a coherent, creative visual theme suitable for a warm “memory book” site (distinct color palette, typography, spacing, and card/list styling) and use it consistently across the landing, list, and submission form. Do not use a blue/purple dominant palette.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-add-generated-static-images-and-use-them-in-the-ui-served-from-frontend-public-assets-generated-including-a-hero-banner-image-for-the-landing-section-and-a-small-decorative-icon-used-in-the-header-or-memory-cards",
      "title": "Add generated static images and use them in the UI (served from frontend/public/assets/generated), including a hero banner image for the landing section and a small decorative icon used in the header or memory cards.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-memory-submission-ui-to-allow-visitors-to-optionally-add-a-picture-url-and-a-video-url-when-submitting-a-memory-with-clear-english-labels-and-validation",
      "title": "Update the memory submission UI to allow visitors to optionally add a picture URL and a video URL when submitting a memory, with clear English labels and validation.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-memories-list-ui-to-display-attached-pictures-and-videos-on-each-memory-card-when-present-in-a-readable-layout-that-works-on-mobile-and-desktop",
      "title": "Update the memories list UI to display attached pictures and videos on each memory card when present, in a readable layout that works on mobile and desktop.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-front-end-password-gate-that-blocks-all-website-content-until-the-visitor-enters-the-exact-4-digit-code-5699",
      "title": "Add a front-end password gate that blocks all website content until the visitor enters the exact 4-digit code \"5699\".",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-persist-the-unlocked-state-in-the-browser-so-a-visitor-who-has-already-entered-5699-does-not-have-to-re-enter-it-on-refresh-during-the-same-browser-session-and-provide-a-lock-action-to-re-hide-the-site-content",
      "title": "Persist the unlocked state in the browser so a visitor who has already entered \"5699\" does not have to re-enter it on refresh during the same browser session, and provide a \"Lock\" action to re-hide the site content.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-password-gate-ui-matches-the-existing-warm-visual-theme-tailwind-shadcn-components-and-uses-clear-accessible-english-labels-and-helper-text",
      "title": "Ensure the password gate UI matches the existing warm visual theme (Tailwind + shadcn components) and uses clear, accessible English labels and helper text.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-optional-image-upload-control-to-the-memory-submission-form-that-lets-visitors-pick-an-image-from-their-device-using-a-standard-browser-file-picker-and-submit-it-with-the-memory",
      "title": "Add an optional image upload control to the memory submission form that lets visitors pick an image from their device using a standard browser file picker, and submit it with the memory.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-uploaded-images-submitted-as-data-urls-render-correctly-in-the-memories-list-ui",
      "title": "Ensure uploaded images submitted as data URLs render correctly in the memories list UI.",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-welcome-page-that-is-shown-immediately-after-the-visitor-successfully-unlocks-the-site-after-the-4-digit-code-screen-and-before-showing-the-main-memories-experience",
      "title": "Add a welcome page that is shown immediately after the visitor successfully unlocks the site (after the 4-digit code screen) and before showing the main memories experience.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-persist-welcome-page-completion-for-the-current-browser-session-so-the-welcome-page-is-not-repeatedly-shown-after-it-has-been-dismissed-unless-the-visitor-locks-the-site-again",
      "title": "Persist welcome-page completion for the current browser session so the welcome page is not repeatedly shown after it has been dismissed, unless the visitor locks the site again.",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-optional-video-file-picker-to-the-memory-submission-form-that-lets-visitors-select-a-video-from-their-device-and-submit-it-as-a-data-url-stored-in-the-existing-memory-videourl-field",
      "title": "Add an optional video file picker to the memory submission form that lets visitors select a video from their device and submit it as a data URL stored in the existing memory videoUrl field.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-add-client-side-validation-and-ux-for-the-uploaded-video-file-size-type-checks-remove-action-and-a-lightweight-selection-summary-consistent-with-the-existing-image-upload-ux",
      "title": "Add client-side validation and UX for the uploaded video file (size/type checks, remove action, and a lightweight selection summary) consistent with the existing image upload UX.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-change-memory-card-video-behavior-so-videos-are-only-playable-when-the-visitor-explicitly-opens-them-rather-than-being-immediately-playable-inline-in-the-card",
      "title": "Change memory card video behavior so videos are only playable when the visitor explicitly opens them, rather than being immediately playable inline in the card.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-floating-bottom-right-corner-helper-widget-named-tingi-that-is-visible-on-the-main-memories-experience-i-e-after-the-visitor-passes-the-4-digit-password-gate-and-dismisses-the-welcome-page-the-widget-must-use-a-small-icon-open-close-on-click-and-match-the-site-s-existing-warm-tailwind-shadcn-visual-theme",
      "title": "Add a floating bottom-right corner helper widget named “Tingi” that is visible on the main memories experience (i.e., after the visitor passes the 4-digit password gate and dismisses the welcome page). The widget must use a small icon, open/close on click, and match the site’s existing warm Tailwind + shadcn visual theme.",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-simple-chat-like-interaction-ui-for-tingi-where-the-visitor-can-type-a-question-and-submit-it-see-a-loading-state-and-receive-a-short-funny-response-since-no-llms-are-available-generate-humor-via-deterministic-templates-e-g-playful-one-liners-combined-with-information-extracted-from-google-results",
      "title": "Implement a simple chat-like interaction UI for Tingi where the visitor can type a question and submit it, see a loading state, and receive a short “funny” response. Since no LLMs are available, generate humor via deterministic templates (e.g., playful one-liners) combined with information extracted from Google results.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-integrate-tingi-with-the-google-custom-search-json-api-to-fetch-information-for-a-user-query-and-use-it-to-produce-the-short-funny-summary-the-implementation-must-call-the-google-custom-search-endpoint-from-the-frontend-and-support-configuring-the-required-google-api-key-and-custom-search-engine-id-cx-from-the-ui-stored-locally-in-the-browser",
      "title": "Integrate Tingi with the Google Custom Search JSON API to fetch information for a user query and use it to produce the short funny summary. The implementation must call the Google Custom Search endpoint from the frontend and support configuring the required Google API key and Custom Search Engine ID (cx) from the UI (stored locally in the browser).",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-add-generated-static-image-assets-for-tingi-s-icon-and-render-it-in-the-tingi-widget",
      "title": "Add generated static image assets for Tingi’s icon and render it in the Tingi widget.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-the-google-api-key-and-search-engine-id-cx-configuration-ui-from-the-tingi-widget-so-visitors-can-no-longer-enter-or-save-these-values-in-the-browser",
      "title": "Remove the Google API Key and Search Engine ID (cx) configuration UI from the Tingi widget so visitors can no longer enter or save these values in the browser.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-update-tingi-to-use-hard-coded-google-custom-search-credentials-including-hard-coding-the-provided-google-api-key-aizasybuccr7sqcfn00ltgomjgqjqbvl42guj7i-in-the-frontend-code-path-used-to-perform-searches",
      "title": "Update Tingi to use hard-coded Google Custom Search credentials, including hard-coding the provided Google API key \"AIzaSyBUCcr7sqCfN00LtGOmJgQjqBvL42gUj7I\" in the frontend code path used to perform searches.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-configure-tingi-s-google-custom-search-requests-so-the-information-source-is-google-com-i-e-searches-are-constrained-to-google-com-while-still-using-the-google-custom-search-json-api-endpoint",
      "title": "Configure Tingi’s Google Custom Search requests so the information source is google.com (i.e., searches are constrained to google.com) while still using the Google Custom Search JSON API endpoint.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-update-tingi-s-search-implementation-to-use-chrome-com-as-the-information-source-replacing-the-current-google-com-only-behavior-and-remove-all-google-com-specific-restrictions-filters-from-the-search-request-and-result-processing",
      "title": "Update Tingi’s search implementation to use chrome.com as the information source (replacing the current google.com-only behavior), and remove all google.com-specific restrictions/filters from the search request and result processing.",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-update-tingi-s-user-facing-text-and-error-messaging-to-reflect-the-chrome-com-information-source-instead-of-google-google-com-including-the-first-open-welcome-message-the-empty-state-prompt-and-any-special-no-results-due-to-site-restriction-messaging",
      "title": "Update Tingi’s user-facing text and error messaging to reflect the chrome.com information source instead of Google/google.com, including the first-open welcome message, the empty-state prompt, and any special “no results due to site restriction” messaging.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-any-domain-source-restriction-from-tingi-s-google-custom-search-requests-so-searches-are-not-constrained-to-chrome-com-or-google-com-i-e-do-not-set-sitesearch-sitesearchfilter-or-any-equivalent-restriction",
      "title": "Remove any domain/source restriction from Tingi’s Google Custom Search requests so searches are not constrained to chrome.com or google.com (i.e., do not set siteSearch/siteSearchFilter or any equivalent restriction).",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-tingi-s-google-custom-search-credentials-hard-coded-exactly-as-previously-provided-api-key-and-cx-and-do-not-add-any-ui-that-allows-visitors-to-change-or-store-them",
      "title": "Keep Tingi’s Google Custom Search credentials hard-coded exactly as previously provided (API key and CX) and do not add any UI that allows visitors to change or store them.",
      "reqIds": [
        "REQ-30"
      ],
      "version": 1
    },
    {
      "id": "feature-update-tingi-s-user-facing-text-and-error-messaging-to-remove-chrome-com-and-google-com-references-now-that-searches-are-not-restricted-to-any-single-source",
      "title": "Update Tingi’s user-facing text and error messaging to remove chrome.com and google.com references now that searches are not restricted to any single source.",
      "reqIds": [
        "REQ-31"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-tingiwidget-frontend-to-call-the-new-motoko-backend-api-for-searches-and-stop-calling-google-custom-search-directly-from-the-browser",
      "title": "Update the TingiWidget frontend to call the new Motoko backend API for searches and stop calling Google Custom Search directly from the browser.",
      "reqIds": [
        "REQ-34"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-no-ui-is-added-that-allows-visitors-to-view-edit-or-store-google-api-credentials-credentials-must-remain-hard-coded-and-non-configurable",
      "title": "Ensure no UI is added that allows visitors to view, edit, or store Google API credentials; credentials must remain hard-coded and non-configurable.",
      "reqIds": [
        "REQ-35"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-the-existing-tingi-search-assistant-experience-and-replace-it-with-a-new-bottom-right-floating-helper-widget-named-piddu-that-simulates-a-chatgpt-style-chat-experience-using-deterministic-scripted-behavior-only-with-a-fully-new-ui-look",
      "title": "Remove the existing Tingi search assistant experience and replace it with a new bottom-right floating helper widget named “Piddu” that simulates a ChatGPT-style chat experience using deterministic/scripted behavior only, with a fully new UI look.",
      "reqIds": [
        "REQ-36"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-piddu-s-responses-entirely-on-the-frontend-using-deterministic-logic-no-llm-calls-no-external-apis-and-no-backend-calls",
      "title": "Implement Piddu’s responses entirely on the frontend using deterministic logic (no LLM calls, no external APIs, and no backend calls).",
      "reqIds": [
        "REQ-37"
      ],
      "version": 1
    },
    {
      "id": "feature-remove-tingi-search-wiring-from-the-frontend-including-the-react-query-mutation-hook-and-any-unused-tingi-configuration-search-helper-modules-so-the-build-contains-no-active-tingi-search-flow",
      "title": "Remove Tingi search wiring from the frontend, including the React Query mutation hook and any unused Tingi configuration/search helper modules, so the build contains no active Tingi search flow.",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-app-shell-to-render-the-new-piddu-widget-instead-of-tingiwidget-only-in-the-main-memories-experience-after-the-visitor-unlocks-with-the-4-digit-code-and-dismisses-the-welcome-page",
      "title": "Update the app shell to render the new Piddu widget (instead of TingiWidget) only in the main memories experience (after the visitor unlocks with the 4-digit code and dismisses the welcome page).",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    },
    {
      "id": "feature-completely-remove-the-existing-piddu-chat-ui-and-behavior-and-replace-it-with-a-new-floating-bottom-right-music-box-widget-no-chat-features-the-widget-must-be-visible-only-in-the-main-memories-experience-after-the-visitor-unlocks-with-the-4-digit-code-and-dismisses-the-welcome-page-matching-the-current-placement-visibility-rules-used-for-piddu",
      "title": "Completely remove the existing Piddu chat UI and behavior and replace it with a new floating bottom-right “Music Box” widget (no chat features). The widget must be visible only in the main memories experience (after the visitor unlocks with the 4-digit code and dismisses the welcome page), matching the current placement/visibility rules used for Piddu.",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-add-music-box-ui-that-lets-visitors-upload-an-audio-file-from-their-device-using-a-standard-browser-file-picker-submit-it-to-the-backend-and-show-clear-success-error-messaging-in-english",
      "title": "Add Music Box UI that lets visitors upload an audio file from their device using a standard browser file picker, submit it to the backend, and show clear success/error messaging in English.",
      "reqIds": [
        "REQ-43"
      ],
      "version": 1
    },
    {
      "id": "feature-add-music-box-playback-ui-display-a-simple-list-of-uploaded-songs-with-play-pause-controls-that-work-on-mobile-and-desktop",
      "title": "Add Music Box playback UI: display a simple list of uploaded songs with play/pause controls that work on mobile and desktop.",
      "reqIds": [
        "REQ-44"
      ],
      "version": 1
    },
    {
      "id": "feature-add-client-side-validation-for-uploaded-music-files-type-and-reasonable-size-limit-with-clear-english-validation-messages-plus-a-remove-clear-selection-action-prior-to-upload",
      "title": "Add client-side validation for uploaded music files (type and reasonable size limit) with clear English validation messages, plus a remove/clear selection action prior to upload.",
      "reqIds": [
        "REQ-45"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-music-box-widget-matches-the-site-s-existing-warm-visual-theme-tailwind-shadcn-components-and-uses-english-user-facing-labels-e-g-music-box-upload-song-choose-an-audio-file-play-pause-no-songs-yet",
      "title": "Ensure the Music Box widget matches the site’s existing warm visual theme (Tailwind + shadcn components) and uses English user-facing labels (e.g., “Music Box”, “Upload song”, “Choose an audio file”, “Play”, “Pause”, “No songs yet”).",
      "reqIds": [
        "REQ-46"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-frontend-data-layer-react-query-to-fetch-the-shared-song-list-from-the-backend-and-to-upload-new-songs-including-appropriate-cache-invalidation-so-the-list-updates-after-a-successful-upload",
      "title": "Update the frontend data layer (React Query) to fetch the shared song list from the backend and to upload new songs, including appropriate cache invalidation so the list updates after a successful upload.",
      "reqIds": [
        "REQ-47"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-welcome-page-ui-to-display-the-exact-subheading-text-made-for-tingi-as-a-visible-subheading-under-the-main-welcome-title",
      "title": "Update the Welcome page UI to display the exact subheading text \"Made for Tingi\" as a visible subheading under the main welcome title.",
      "reqIds": [
        "REQ-48"
      ],
      "version": 1
    },
    {
      "id": "feature-change-memory-timestamp-formatting-in-the-memories-list-to-include-both-date-and-time-of-day-not-only-the-date-using-english-formatting",
      "title": "Change memory timestamp formatting in the Memories list to include both date and time-of-day (not only the date), using English formatting.",
      "reqIds": [
        "REQ-49"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-separate-full-screen-view-for-an-individual-memory-that-visitors-can-open-from-the-memories-list-when-they-want-to-read-view-a-memory-in-a-larger-layout-and-close-to-return-to-the-list",
      "title": "Add a separate full-screen view for an individual memory that visitors can open from the memories list when they want to read/view a memory in a larger layout, and close to return to the list.",
      "reqIds": [
        "REQ-50"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-new-post-unlock-youtube-links-page-in-the-frontend-that-is-accessible-via-a-floating-button-visible-only-in-the-main-post-unlock-experience-i-e-after-unlocking-and-dismissing-the-welcome-page-the-page-must-allow-visitors-to-submit-a-youtube-video-short-url-and-display-the-shared-list-with-time-of-upload-shown",
      "title": "Add a new post-unlock \"YouTube Links\" page in the frontend that is accessible via a floating button (visible only in the main post-unlock experience, i.e., after unlocking and dismissing the Welcome page). The page must allow visitors to submit a YouTube video/Short URL and display the shared list with time-of-upload shown.",
      "reqIds": [
        "REQ-52"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-lock-screen-passwordgate-ui-to-include-a-username-input-section-positioned-above-the-existing-4-digit-pin-input-and-use-clear-english-labels-and-helper-text",
      "title": "Update the lock screen (PasswordGate) UI to include a username input section positioned above the existing 4-digit PIN input, and use clear English labels and helper text.",
      "reqIds": [
        "REQ-54"
      ],
      "version": 1
    },
    {
      "id": "feature-change-the-lock-unlock-validation-so-the-site-unlocks-only-when-the-visitor-enters-an-allowed-username-exactly-tingi99-or-meow99-and-the-existing-4-digit-code-exactly-5699",
      "title": "Change the lock/unlock validation so the site unlocks only when the visitor enters an allowed username (exactly \"tingi99\" or \"meow99\") AND the existing 4-digit code (exactly \"5699\").",
      "reqIds": [
        "REQ-55"
      ],
      "version": 1
    },
    {
      "id": "feature-persist-the-unlocked-state-for-the-current-browser-session-only-when-both-username-code-are-valid-and-ensure-the-existing-lock-action-fully-re-locks-the-site-so-the-username-code-screen-is-shown-again",
      "title": "Persist the unlocked state for the current browser session only when BOTH username + code are valid, and ensure the existing \"Lock\" action fully re-locks the site so the username+code screen is shown again.",
      "reqIds": [
        "REQ-56"
      ],
      "version": 1
    },
    {
      "id": "feature-persist-a-per-browser-submitter-credential-on-the-frontend-and-include-it-when-submitting-new-memories-so-the-same-browser-can-later-prove-it-is-the-original-submitter-for-edit-permission-checks",
      "title": "Persist a per-browser submitter credential on the frontend and include it when submitting new memories so the same browser can later prove it is the original submitter for edit permission checks.",
      "reqIds": [
        "REQ-58"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-edit-flow-in-the-ui-that-is-available-on-both-the-memory-card-and-the-full-screen-memory-view-and-only-shows-enables-editing-when-the-current-browser-is-allowed-to-edit-that-specific-memory",
      "title": "Add an edit flow in the UI that is available on both the memory card and the full-screen memory view, and only shows/enables editing when the current browser is allowed to edit that specific memory.",
      "reqIds": [
        "REQ-59"
      ],
      "version": 1
    },
    {
      "id": "feature-display-an-edited-timestamp-for-edited-memories-in-both-the-memory-card-and-the-full-screen-memory-view-in-english-formatting-while-keeping-the-original-created-timestamp-visible",
      "title": "Display an edited timestamp for edited memories in both the memory card and the full-screen memory view, in English formatting, while keeping the original created timestamp visible.",
      "reqIds": [
        "REQ-60"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-the-react-query-memories-data-layer-to-support-editing-memories-via-the-new-backend-api-and-invalidate-refetch-cached-memories-after-a-successful-edit",
      "title": "Extend the React Query memories data layer to support editing memories via the new backend API and invalidate/refetch cached memories after a successful edit.",
      "reqIds": [
        "REQ-61"
      ],
      "version": 1
    },
    {
      "id": "feature-persist-the-successfully-unlocked-username-tingi99-or-meow99-in-sessionstorage-and-expose-it-via-the-existing-password-gate-state-so-the-rest-of-the-ui-can-determine-which-unlock-role-is-active-ensure-the-stored-username-is-cleared-when-the-visitor-uses-the-existing-lock-action",
      "title": "Persist the successfully-unlocked username (\"tingi99\" or \"meow99\") in sessionStorage and expose it via the existing password-gate state so the rest of the UI can determine which unlock role is active; ensure the stored username is cleared when the visitor uses the existing Lock action.",
      "reqIds": [
        "REQ-62"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-username-based-memory-visibility-rules-only-to-the-memories-list-and-the-memory-full-screen-viewer-when-unlocked-as-tingi99-show-all-memories-when-unlocked-as-meow99-show-only-memories-submitted-by-the-current-visitor-i-e-memories-whose-submitter-principal-matches-the-currently-active-internet-identity-principal-used-by-the-frontend-actor-identity",
      "title": "Apply username-based memory visibility rules only to the Memories list and the Memory full-screen viewer: when unlocked as \"tingi99\", show all memories; when unlocked as \"meow99\", show only memories submitted by the current visitor (i.e., memories whose submitter Principal matches the currently active Internet Identity Principal used by the frontend actor/identity).",
      "reqIds": [
        "REQ-63"
      ],
      "version": 1
    },
    {
      "id": "feature-enforce-username-based-memory-editing-rules-only-within-the-memory-editing-experience-when-unlocked-as-tingi99-keep-the-existing-rule-that-only-the-original-submitter-can-edit-when-unlocked-as-meow99-allow-editing-only-for-memories-that-are-both-a-visible-under-the-meow99-filter-and-b-authored-by-the-current-internet-identity-principal-do-not-allow-editing-any-other-memory",
      "title": "Enforce username-based memory editing rules only within the memory editing experience: when unlocked as \"tingi99\", keep the existing rule that only the original submitter can edit; when unlocked as \"meow99\", allow editing only for memories that are both (a) visible under the meow99 filter and (b) authored by the current Internet Identity Principal (do not allow editing any other memory).",
      "reqIds": [
        "REQ-64"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-new-react-query-data-layer-for-chat-that-can-a-fetch-the-shared-chat-message-list-from-the-backend-with-periodic-polling-no-websockets-and-b-submit-new-chat-messages-with-cache-invalidation-refetch-after-successful-submission",
      "title": "Create a new React Query data layer for chat that can (a) fetch the shared chat message list from the backend with periodic polling (no WebSockets) and (b) submit new chat messages, with cache invalidation/refetch after successful submission.",
      "reqIds": [
        "REQ-66"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-new-floating-chat-widget-ui-that-is-visible-only-in-the-main-post-unlock-experience-i-e-after-the-visitor-unlocks-with-username-pin-and-dismisses-the-welcome-page-the-widget-must-allow-composing-a-message-submitting-it-and-reading-the-shared-message-list-the-widget-must-match-the-existing-warm-tailwind-shadcn-visual-theme-and-must-not-overlap-interfere-with-the-existing-bottom-right-music-box-launcher-button",
      "title": "Add a new floating chat widget UI that is visible only in the main post-unlock experience (i.e., after the visitor unlocks with username + PIN and dismisses the Welcome page). The widget must allow composing a message, submitting it, and reading the shared message list. The widget must match the existing warm Tailwind + shadcn visual theme and must not overlap/interfere with the existing bottom-right Music Box launcher button.",
      "reqIds": [
        "REQ-67"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-chat-access-is-available-to-both-allowed-unlock-usernames-tingi99-and-meow99-and-does-not-apply-the-existing-memory-visibility-editing-restrictions-to-chat-messages",
      "title": "Ensure chat access is available to both allowed unlock usernames (\"tingi99\" and \"meow99\") and does not apply the existing memory visibility/editing restrictions to chat messages.",
      "reqIds": [
        "REQ-68"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-shared-chat-system-so-a-visitor-must-enter-a-display-name-before-sending-chat-messages-store-the-display-name-in-browser-session-storage-for-the-current-session-and-display-that-name-publicly-alongside-each-chat-message-for-all-visitors",
      "title": "Update the shared chat system so a visitor must enter a display name before sending chat messages; store the display name in browser session storage for the current session; and display that name publicly alongside each chat message for all visitors.",
      "reqIds": [
        "REQ-69"
      ],
      "version": 1
    },
    {
      "id": "feature-change-chat-message-timestamp-rendering-so-each-chat-message-shows-only-the-time-english-formatting-and-the-timestamp-appears-under-the-message-text-not-next-to-the-sender",
      "title": "Change chat message timestamp rendering so each chat message shows only the time (English formatting) and the timestamp appears under the message text (not next to the sender).",
      "reqIds": [
        "REQ-70"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-existing-memories-edit-flow-so-editing-actually-works-opening-the-edit-dialog-must-remain-open-allow-adding-removing-words-in-the-memory-text-and-successfully-save-changes-to-the-backend-so-updates-appear-in-the-memories-list-and-the-full-screen-memory-viewer",
      "title": "Fix the existing Memories edit flow so editing actually works: opening the edit dialog must remain open, allow adding/removing words in the memory text, and successfully save changes to the backend so updates appear in the memories list and the full-screen memory viewer.",
      "reqIds": [
        "REQ-71"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-fixed-height-internally-scrollable-chat-message-list-inside-the-floating-chat-widget-and-apply-a-custom-warm-themed-scrollbar-style-not-default-browser-scrollbar-styling",
      "title": "Add a fixed-height, internally scrollable chat message list inside the floating Chat widget, and apply a custom warm-themed scrollbar style (not default browser scrollbar styling).",
      "reqIds": [
        "REQ-72"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-floating-chat-widget-ui-to-support-deleting-only-the-current-visitor-s-own-messages-including-a-a-small-per-message-delete-icon-for-single-deletion-and-b-an-optional-multi-select-mode-to-delete-multiple-selected-own-messages-at-once-deleted-messages-must-disappear-entirely",
      "title": "Update the floating Chat widget UI to support deleting only the current visitor’s own messages, including (a) a small per-message delete icon for single deletion and (b) an optional multi-select mode to delete multiple selected own messages at once; deleted messages must disappear entirely.",
      "reqIds": [
        "REQ-75"
      ],
      "version": 1
    },
    {
      "id": "feature-extend-the-frontend-chat-data-layer-react-query-to-call-the-new-backend-delete-apis-for-single-and-bulk-deletion-and-ensure-appropriate-cache-invalidation-refetch-so-the-chat-message-list-updates-after-deletions",
      "title": "Extend the frontend chat data layer (React Query) to call the new backend delete APIs for single and bulk deletion, and ensure appropriate cache invalidation/refetch so the chat message list updates after deletions.",
      "reqIds": [
        "REQ-76"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-floating-chat-widget-ui-so-a-small-per-message-delete-icon-is-visible-for-the-current-visitor-s-own-messages-in-both-a-normal-single-message-mode-and-b-multi-select-mode-and-clicking-the-icon-deletes-that-specific-message-with-the-existing-confirmation-dialog-without-interfering-with-multi-select-selection-toggling",
      "title": "Update the floating Chat widget UI so a small per-message delete icon is visible for the current visitor’s own messages in BOTH (a) normal single-message mode and (b) multi-select mode, and clicking the icon deletes that specific message (with the existing confirmation dialog) without interfering with multi-select selection toggling.",
      "reqIds": [
        "REQ-77"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-new-full-page-chat-view-that-can-be-opened-in-a-separate-browser-tab-and-shows-the-same-shared-chat-timeline-read-messages-send-message-delete-own-message-s-multi-select-delete-using-the-existing-backend-react-query-chat-hooks",
      "title": "Add a new full-page Chat view that can be opened in a separate browser tab and shows the same shared chat timeline (read messages, send message, delete own message(s), multi-select delete) using the existing backend + React Query chat hooks.",
      "reqIds": [
        "REQ-78"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-existing-bottom-right-floating-chat-launcher-behavior-so-it-opens-the-full-page-chat-view-in-a-new-browser-tab-while-keeping-the-existing-in-page-floating-chat-ui-available-alongside-it",
      "title": "Update the existing bottom-right floating Chat launcher behavior so it opens the full-page Chat view in a new browser tab, while keeping the existing in-page floating chat UI available alongside it.",
      "reqIds": [
        "REQ-79"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-new-tab-full-page-chat-view-can-access-the-current-session-s-unlocked-state-and-if-present-chat-display-name-without-requiring-the-user-to-re-enter-the-username-pin-solely-due-to-opening-a-new-tab",
      "title": "Ensure the new-tab full-page Chat view can access the current session’s unlocked state and (if present) chat display name without requiring the user to re-enter the username/PIN solely due to opening a new tab.",
      "reqIds": [
        "REQ-80"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-right-side-vertical-slider-control-to-the-chat-ui-that-scrolls-through-the-chat-messages-by-controlling-the-message-list-scroll-position",
      "title": "Add a right-side vertical slider control to the chat UI that scrolls through the chat messages by controlling the message list scroll position.",
      "reqIds": [
        "REQ-82"
      ],
      "version": 1
    },
    {
      "id": "feature-redeploy-the-application-using-the-current-codebase-no-feature-changes-and-ensure-the-deployment-completes-successfully",
      "title": "Redeploy the application using the current codebase (no feature changes), and ensure the deployment completes successfully.",
      "reqIds": [
        "REQ-83"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create a website containing written memories of a friend named Rapunzel",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Allow visitors to write/submit their own memories (public submissions)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Implement backend data storage for memories so that submissions persist and can be retrieved later. Each memory must store: a unique id, the memory text, a created timestamp, and optional author name (free text).",
      "reqIds": [
        "REQ-2"
      ],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Add support for pictures and videos in memories (e.g., additional fields/columns for media attachments and displaying them on the site)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Extend the backend Memory data model to support optional picture and video attachments by adding optional fields for an image URL and a video URL, and update backend APIs so submitted and retrieved memories include these fields.",
      "reqIds": [
        "REQ-7"
      ],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Add a simple front-end 4-digit password gate (code: 5699) that users must enter before accessing the website content",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Allow visitors to upload an image from their device via a standard browser file picker when submitting a memory (instead of only providing an image URL).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-9",
      "summary": "Add a welcome page shown immediately after the lock screen unlock, containing text, images, and buttons, before entering the main memories experience.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Add optional video upload via standard browser file picker on the memory submission form; store uploaded video as a data URL; only play videos when a memory card is opened.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-25",
      "summary": "Remove the Tingi Google Custom Search backend API and HTTP outcall logic from the Motoko canister so the backend provides no search/summarizing functionality for the helper bot.",
      "reqIds": [
        "REQ-39"
      ],
      "status": "pending"
    },
    {
      "id": "AR-26",
      "summary": "Replace the Piddu chatbot with a bottom-right floating music-box widget (no chat UI) that lets visitors upload music files, stores them in the backend so all visitors can see/play them, and displays a simple list with play/pause controls.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Implement backend storage for visitor-uploaded music so that uploaded songs persist and are visible/playable to all visitors (not just the uploading browser). Add Motoko APIs to create/upload a song and list all songs.",
      "reqIds": [
        "REQ-42"
      ],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Add a “Made for Tingi” subheading on the welcome page shown after unlocking.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Add a post-unlock YouTube links page where visitors can submit YouTube video/Short links, store them with an uploaded timestamp, and display them in a list similar to memories; provide access via a floating button.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Ensure the memories list UI displays timestamps (time included) for each memory entry.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Add a separate full-screen view for individual memories (open a memory to view it full-screen when needed).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Implement backend storage and APIs for a new post-unlock \"YouTube Links\" feature where visitors can submit a YouTube video/Short link and later view a shared list of submitted links with upload timestamps.",
      "reqIds": [
        "REQ-51"
      ],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Add or update Motoko state migration so that upgrading an existing deployed canister preserves existing stored memories and songs while adding storage for the new YouTube-links feature.",
      "reqIds": [
        "REQ-53"
      ],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Update the front-end lock screen to require entering an allowed username (tingi99 or meow99) plus the existing 4-digit code (5699), with the username input placed above the PIN input.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Allow the original submitter of a memory to edit it later, with Edit actions on both the memory card and the full-screen memory view, and record/display an edited timestamp.",
      "reqIds": [],
      "status": "in_progress"
    },
    {
      "id": "AR-41",
      "summary": "Update the Motoko Memory data model and APIs to support editing a memory only by the original submitter, including recording an edited timestamp.",
      "reqIds": [
        "REQ-57"
      ],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "Restrict memory visibility/editing based on unlock username: tingi99 can view all memories; meow99 can only view and edit memories they submitted (apply only to memory viewing + memory editing).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-43",
      "summary": "Add a post-unlock floating chat widget (visible to both usernames) that allows two different users to talk via a simple message-board style chat with periodic fetching (no real-time).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-44",
      "summary": "Add backend storage and APIs for a shared chat timeline that allows multiple visitors (two different users) to post messages and read messages later (message-board style; no real-time). Each chat message must include: a unique id, message text, created timestamp, and the sender Principal (derived from the authenticated caller).",
      "reqIds": [
        "REQ-65"
      ],
      "status": "pending"
    },
    {
      "id": "AR-45",
      "summary": "Require entering a display name in the floating chat widget before sending messages; remember the name for the session and display it publicly alongside chat messages.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-46",
      "summary": "Display a timestamp on each chat message showing only the time (English formatting), positioned under the message.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-47",
      "summary": "Add a fixed-height scrollable chat message list inside the floating chat widget with a custom warm-themed scrollbar (Tailwind styling).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-48",
      "summary": "Allow users to delete only their own chat messages from the floating chat widget via a per-message delete icon; deleted messages disappear entirely.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-49",
      "summary": "Support multi-select deletion of a user's own chat messages in the floating chat widget (bulk delete), with deleted messages disappearing entirely.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-51",
      "summary": "Implement backend APIs to delete chat messages such that a caller can delete only chat messages they originally sent; deleted messages must disappear entirely from the shared timeline for all visitors.",
      "reqIds": [
        "REQ-73"
      ],
      "status": "pending"
    },
    {
      "id": "AR-52",
      "summary": "Implement backend support for bulk deletion of chat messages (multi-select) so a caller can delete multiple messages in one action, but only for messages they originally sent; deleted messages must disappear entirely.",
      "reqIds": [
        "REQ-74"
      ],
      "status": "pending"
    },
    {
      "id": "AR-53",
      "summary": "Make the floating chat widget act as a launcher that opens a full chat UI in a new browser tab, while keeping the existing in-page floating chat UI available alongside it.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-54",
      "summary": "Auto-delete all chat messages 48 hours after creation (permanently deleted in backend) and apply consistently to both the floating chat widget and the full-page chat view.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-55",
      "summary": "Add a right-side slider control on the floating chat widget that scrolls through the chat messages (controls message list scroll position).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-56",
      "summary": "Implement automatic, permanent deletion of chat messages 48 hours after their creation in the Motoko backend so expired messages are removed from storage for everyone and never returned by the chat APIs.",
      "reqIds": [
        "REQ-81"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Memories website for Rapunzel with public visitor submissions",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}